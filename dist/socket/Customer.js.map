{"version":3,"sources":["../../server/socket/Customer.js"],"names":["ClientRedis","require","Client","module","exports","namespaceCustomer","namespaceUser","on","socket","register","client","data","console","log","name","emit","remove"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,cAAcC,QAAQ,gBAAR,CAApB;AACA,IAAMC,SAASD,QAAQ,UAAR,CAAf;;AAEAE,OAAOC,OAAP,GAAiB,UAACC,iBAAD,EAAoBC,aAApB,EAAsC;AACrDD,oBAAkBE,EAAlB,CAAqB,YAArB;AAAA,wFAAmC,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEZN,OAAOO,QAAP,CAAgBD,MAAhB,CAFY;;AAAA;AAE3BE,oBAF2B;;;AAIjCF,qBAAOD,EAAP,CAAU,SAAV,EAAqB,UAACI,IAAD,EAAU;AAC7BC,wBAAQC,GAAR,sBAA+BH,OAAOI,IAAtC,4BAD6B,CACuC;AACpER,8BAAcS,IAAd,CAAmB,SAAnB,EAA8BJ,IAA9B;AACAH,uBAAOO,IAAP,CAAY,SAAZ,EAAuBJ,IAAvB;AACD,eAJD;;AAMAH,qBAAOD,EAAP,CAAU,YAAV,EAAwB,YAAM;AAC5BK,wBAAQC,GAAR,sBAA+BH,OAAOI,IAAtC,0BAD4B,CACsC;AAClE,oBAAId,YAAYgB,MAAZ,CAAmBN,MAAnB,CAAJ,EAAgC;AAC9BE,0BAAQC,GAAR,sBAA+BH,OAAOI,IAAtC,sCAD8B,CACgD;AAC/E;AACF,eALD;;AAViC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnC;;AAAA;AAAA;AAAA;AAAA;AAiBD,CAlBD","file":"Customer.js","sourcesContent":["const ClientRedis = require('./Client.Redis');\nconst Client = require('./Client');\n\nmodule.exports = (namespaceCustomer, namespaceUser) => {\n  namespaceCustomer.on('connection', async (socket) => {\n    /* Register a customer */\n    const client = await Client.register(socket);\n\n    socket.on('message', (data) => {\n      console.log(`\\nCUSTOMER Bot: ${client.name} enviou uma mensagem.`); // eslint-disable-line\n      namespaceUser.emit('message', data);\n      socket.emit('message', data);\n    });\n\n    socket.on('disconnect', () => {\n      console.log(`\\nCUSTOMER Bot: ${client.name} se desconectou. :(`); // eslint-disable-line\n      if (ClientRedis.remove(client)) {\n        console.log(`\\nCUSTOMER Bot: ${client.name} teve seu registro removido. :)`); // eslint-disable-line\n      }\n    });\n  });\n};\n"]}