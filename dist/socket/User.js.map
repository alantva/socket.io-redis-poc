{"version":3,"sources":["../../server/socket/User.js"],"names":["ClientRedis","require","Client","module","exports","namespaceUser","namespaceCustomer","on","socket","register","client","assign","data","console","log","name","emit","remove"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,cAAcC,QAAQ,gBAAR,CAApB;AACA,IAAMC,SAASD,QAAQ,UAAR,CAAf;;AAEA;;;;;;;;AAQAE,OAAOC,OAAP,GAAiB,UAACC,aAAD,EAAgBC,iBAAhB,EAAsC;AACrDD,gBAAcE,EAAd,CAAiB,YAAjB;AAAA,wFAA+B,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAERN,OAAOO,QAAP,CAAgBD,MAAhB,CAFQ;;AAAA;AAEvBE,oBAFuB;AAAA;AAAA,qBAIvBR,OAAOS,MAAP,CAAcD,MAAd,CAJuB;;AAAA;;AAM7BF,qBAAOD,EAAP,CAAU,SAAV,EAAqB,UAACK,IAAD,EAAU;AAC7BC,wBAAQC,GAAR,kBAA2BJ,OAAOK,IAAlC,4BAD6B,CACmC;AAChET,kCAAkBU,IAAlB,CAAuB,SAAvB,EAAkCJ,IAAlC;AACAJ,uBAAOQ,IAAP,CAAY,SAAZ,EAAuBJ,IAAvB;AACD,eAJD;;AAMAJ,qBAAOD,EAAP,CAAU,YAAV,EAAwB,YAAM;AAC5BM,wBAAQC,GAAR,kBAA2BJ,OAAOK,IAAlC,0BAD4B,CACkC;AAC9D,oBAAIf,YAAYiB,MAAZ,CAAmBP,MAAnB,CAAJ,EAAgC;AAC9BG,0BAAQC,GAAR,kBAA2BJ,OAAOK,IAAlC,sCAD8B,CAC4C;AAC3E;AACF,eALD;;AAZ6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/B;;AAAA;AAAA;AAAA;AAAA;AAmBD,CApBD","file":"User.js","sourcesContent":["const ClientRedis = require('./Client.Redis');\nconst Client = require('./Client');\n\n/*\n  Client: {\n    id: String,\n    name: String,\n    type: String,\n  }\n*/\n\nmodule.exports = (namespaceUser, namespaceCustomer) => {\n  namespaceUser.on('connection', async (socket) => {\n    /* Register a user */\n    const client = await Client.register(socket);\n\n    await Client.assign(client);\n\n    socket.on('message', (data) => {\n      console.log(`\\nUSER Bot: ${client.name} enviou uma mensagem.`); // eslint-disable-line\n      namespaceCustomer.emit('message', data);\n      socket.emit('message', data);\n    });\n\n    socket.on('disconnect', () => {\n      console.log(`\\nUSER Bot: ${client.name} se desconectou. :(`); // eslint-disable-line\n      if (ClientRedis.remove(client)) {\n        console.log(`\\nUSER Bot: ${client.name} teve seu registro removido. :)`); // eslint-disable-line\n      }\n    });\n  });\n};\n"]}